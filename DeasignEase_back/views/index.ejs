<!-- filepath: c:\wamp64\www\designease-api\views\index.ejs -->
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Bienvenue sur DesignEase API</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background: #f4f6fb; margin: 0; }
        .container { max-width: 600px; margin: 60px auto; background: #fff; border-radius: 12px; box-shadow: 0 2px 16px #0001; padding: 32px; }
        h1 { color: #007bff; }
        .api-key { background: #f1f3f7; padding: 12px; border-radius: 6px; font-family: monospace; margin: 16px 0; }
        code { background: #eee; padding: 2px 6px; border-radius: 4px; }
        .test-section { margin-top: 32px; }
        footer { margin-top: 40px; color: #888; font-size: 14px; text-align: center; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Bienvenue sur <span style="color:#007bff">DesignEase API</span></h1>
        <p>Générez des composants UI dynamiques pour vos projets front-end.</p>
        <h3>Votre clé API :</h3>
        <div class="api-key"><%= apiKey %></div>
        <div class="test-section">
            <h3>Tester l’API dans un projet React</h3>
            <ol>
                <li>Installez <code>axios</code> ou utilisez <code>fetch</code>.</li>
                <li>Exemple d’appel :
<pre><code>{`fetch('http://localhost:5000/api/generate', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json', 'x-api-key': '<%= apiKey %>' },
  body: JSON.stringify({
    component: 'button',
    text: 'Cliquez-moi',
    size: 'large',
    glassmorphism: true,
    framework: 'react'
  })
})
.then(res => res.json())
.then(data => console.log(data.code));`}</code></pre>
                </li>
            </ol>
        </div>
        <div class="test-section">
            <h3>Tester l’API directement ici</h3>
            <form id="testForm">
                <input type="text" name="text" placeholder="Texte du bouton" value="Cliquez-moi" required />
                <select name="size">
                    <option value="large">Large</option>
                    <option value="small">Small</option>
                </select>
                <label>
                    <input type="checkbox" name="glassmorphism" checked /> Glassmorphism
                </label>
                <input type="hidden" name="component" value="button" />
                <input type="hidden" name="framework" value="react" />
                <button type="submit">Générer le code</button>
            </form>
            <pre id="result"></pre>
        </div>
        <footer>
            &copy; 2025 DesignEase API
        </footer>
    </div>
    <script>
document.getElementById('testForm').onsubmit = async function(e) {
    e.preventDefault();
    const form = e.target;
    const data = {
        component: form.component.value,
        text: form.text.value,
        size: form.size.value,
        glassmorphism: form.glassmorphism.checked,
        framework: form.framework.value
    };
    const res = await fetch('/api/generate', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json', 'x-api-key': '<%= apiKey %>' },
        body: JSON.stringify(data)
    });
    const json = await res.json();
    document.getElementById('result').textContent = json.code || json.error || 'Erreur';
};
</script>
</body>
</html>